<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <title>new tab</title>

    <!-- generated with http://realfavicongenerator.net/ -->
    <link rel="apple-touch-icon" sizes="180x180" href="./apple-touch-icon.png">
    <link rel="icon" type="image/png" href="./favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="./favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="./manifest.json">
    <link rel="mask-icon" href="./safari-pinned-tab.svg" color="#5bbad5">
    <meta name="theme-color" content="#ffffff">

    <meta name="description" content="a new tab was opened and is ready to use">
    <meta name="author" content="@bemayr">
    <style>
    body {
        width: 100vw;
        height: 100vh;
        margin: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        -webkit-touch-callout: none; /* iOS Safari */
          -webkit-user-select: none; /* Chrome/Safari/Opera */
           -khtml-user-select: none; /* Konqueror */
             -moz-user-select: none; /* Firefox */
              -ms-user-select: none; /* Internet Explorer/Edge */
                  user-select: none; /* Non-prefixed version, currently not supported by any browser */
        font-size: 1em;
        text-shadow: 0 1px 5px rgba(0,0,0,.1);
    }
    #content {
        z-index: 2;
        cursor: default;
    }
    #heading {
        color: white;
        text-align: center;
        margin-top: 20vh;
    }
    #clock {
        letter-spacing: -5px;
        font-size: 1125%;
        font-weight: 500;
        margin-bottom: -.08em;
    }
    #greeting-wrapper {
        font-size: 337.5%;
        letter-spacing: 0;
        white-space: nowrap;
        font-weight: 500;
    }

    #links {
        margin-top: 10vh;
        display: flex;
        flex-direction: row;
        justify-content: center;
        padding: .7em;
    }
    #links > a {
        color: white;
        text-decoration: none;
        text-transform: uppercase;
        margin: .7em;
        display: flex;
        flex-direction: column;
        align-items: center;
        transition: all .05s ease-in-out;
        opacity: .95;
        outline: 0px solid transparent;
    }
    #links > a:hover, a:focus {
        transform: scale(1.1);
        opacity: 1;
    }
    #links svg {
        fill: white;
        height: 2.3em;
        width: 2.3em;
    }
    #links label {
        display: block;
        cursor: pointer;
        font-size: .5em;
        text-align: center;
    }
    #background {
        margin: 0;
        padding: 0;
        z-index: 0;
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: transparent;
        background-size: cover;
        background-position: center center;
        background-repeat: no-repeat;
    }
    #background-overlay {
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        z-index: 1;
        background: url(overlay.png);
        background-size: 100% 100%;
        opacity: .7;
    }
    #location {
        color: white;
        position: absolute;
        right: 2em;
        bottom: 1.2em;
        font-size: .9em;
        opacity: .5;
        text-decoration: none;
        cursor: pointer;
        z-index: 10;
    }
    #name {
        outline: 0px solid transparent;
        cursor: text;
    }
    #name:focus {
        border-bottom: .09em solid white;
    }
    </style>
</head>

<body>
    <div id="background-overlay"></div>
    <div id="background"></div>
    <div id="content">
        <div id="heading">
            <div id="clock"></div>
            <div id="greeting-wrapper"><span id="greeting"></span>, <span id="name" class="single-line" contenteditable="true"></span>.</div>
        </div>
        <div id="links">
            <a href="https://twitter.com" tabindex="1">
                <svg xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 300.00006 280" height="280" width="300" version="1.1">
                    <g transform="translate(-539.18 -568.86)">
                        <path d="m633.9 812.04c112.46 0 173.96-93.168 173.96-173.96 0-2.6463-0.0539-5.2806-0.1726-7.903 11.938-8.6302 22.314-19.4 30.498-31.66-10.955 4.8694-22.744 8.1474-35.111 9.6255 12.623-7.5693 22.314-19.543 26.886-33.817-11.813 7.0031-24.895 12.093-38.824 14.841-11.157-11.884-27.041-19.317-44.629-19.317-33.764 0-61.144 27.381-61.144 61.132 0 4.7978 0.5364 9.4646 1.5854 13.941-50.815-2.5569-95.874-26.886-126.03-63.88-5.2508 9.0354-8.2785 19.531-8.2785 30.73 0 21.212 10.794 39.938 27.208 50.893-10.031-0.30992-19.454-3.0635-27.69-7.6468-0.009 0.25652-0.009 0.50661-0.009 0.78077 0 29.61 21.075 54.332 49.051 59.934-5.1376 1.4006-10.543 2.1516-16.122 2.1516-3.9336 0-7.766-0.38716-11.491-1.1026 7.7838 24.293 30.355 41.971 57.115 42.465-20.926 16.402-47.287 26.171-75.937 26.171-4.929 0-9.7983-0.28036-14.584-0.84634 27.059 17.344 59.189 27.464 93.722 27.464"></path>
                    </g>
                </svg>
                <label>twitter</label>
            </a>
            <a href="https://github.com" tabindex="1">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="-100 0 1124 1174">
                    <path d="M 512 0 C 229.25 0 0 229.25 0 512 c 0 226.25 146.688 418.125 350.156 485.812 c 25.594 4.688 34.938 -11.125 34.938 -24.625 c 0 -12.188 -0.469 -52.562 -0.719 -95.312 C 242 908.812 211.906 817.5 211.906 817.5 c -23.312 -59.125 -56.844 -74.875 -56.844 -74.875 c -46.531 -31.75 3.53 -31.125 3.53 -31.125 c 51.406 3.562 78.47 52.75 78.47 52.75 c 45.688 78.25 119.875 55.625 149 42.5 c 4.654 -33 17.904 -55.625 32.5 -68.375 C 304.906 725.438 185.344 681.5 185.344 485.312 c 0 -55.938 19.969 -101.562 52.656 -137.406 c -5.219 -13 -22.844 -65.094 5.062 -135.562 c 0 0 42.938 -13.75 140.812 52.5 c 40.812 -11.406 84.594 -17.031 128.125 -17.219 c 43.5 0.188 87.312 5.875 128.188 17.281 c 97.688 -66.312 140.688 -52.5 140.688 -52.5 c 28 70.531 10.375 122.562 5.125 135.5 c 32.812 35.844 52.625 81.469 52.625 137.406 c 0 196.688 -119.75 240 -233.812 252.688 c 18.438 15.875 34.75 47 34.75 94.75 c 0 68.438 -0.688 123.625 -0.688 140.5 c 0 13.625 9.312 29.562 35.25 24.562 C 877.438 930 1024 738.125 1024 512 C 1024 229.25 794.75 0 512 0 Z"></path>
                </svg>
            <label>github</label>
            </a>
            <a href="https://sci-hub.do/" tabindex="1">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M12,3L1,9L12,15L21,10.09V17H23V9M5,13.18V17.18L12,21L19,17.18V13.18L12,17L5,13.18Z" />
                </svg>
                <label>sci-hub</label>
            </a>
        </div>
        <a target="_blank" id="location"></a>
    </div>

    <script>
    (function(){
        var images = [
            { "filename": "0e89624d11f54314a0e28ee09786ac4d.jpg", "location": "Gdańsk, Poland"},
            { "filename": "7f10ab2daaf147c698525882db1dd09d.jpg", "location": "Янтарный, Kaliningrad"},
            { "filename": "05676e094c6d4b65b571ddfadda29ff0.jpg", "location": "Orajõe, Estonia"},
            { "filename": "743f40b2a12d45b18c01f1e5792d023e.jpg", "location": "Baltic Sea, Finland"},
            { "filename": "ea1ddd9bfa97413188353783e6e55f1f.jpg", "location": "Knutnäsvägen, Åland"},
            { "filename": "171e018a0fa44ad888c02fb6324a49d2.jpg", "location": "Wartberg ob der Aist, Austria"},
            { "filename": "ca59b0aa67834a9fb44552eacc879f19.jpg", "location": "Wartberg ob der Aist, Austria"},
            { "filename": "c79992d7ce4148ceb288bb83632f9138.jpg", "location": "Wolfsegg, Austria"},
            { "filename": "fa396395ddbb494b8f0448601c948599.jpg", "location": "Wolfsegg, Austria"},
            { "filename": "0cc265f656c342e9b2631b9c5e3b5e86.jpg", "location": "Wartberg ob der Aist, Austria"},
            { "filename": "179f7801a531484fa1d55b360d136fb4.jpg", "location": "Wartberg ob der Aist, Austria"},
            { "filename": "528ed337ec3c4bf8af9592758a9e8ef0.jpg", "location": "Wartberg ob der Aist, Austria"},
            { "filename": "a72c4034dfee4b38bb516892b91f88f0.jpg", "location": "Malmö, Sweden"}
        ];

        /* General Helper Functions */
        function setContent(elementId, content) {
            document.getElementById(elementId).innerHTML = content
        }
        function setCookie(name, value, expirydays) {
            var expires = "expires="+ new Date(new Date().getTime() + expirydays*24*60*60*1000).toUTCString()
            document.cookie = name + "=" + value + ";" + expires + ";path=/"
        }
        function getCookie(name) {
            var value = "; " + document.cookie
            var parts = value.split("; " + name + "=")
            if (parts.length == 2) return parts.pop().split(";").shift()
        }
        function storeData(key, value) {
            try {       localStorage.setItem(key, value) }
            catch (_) { setCookie(key, value, 2000) }
        }
        function loadData(key) {
            try       { return localStorage.getItem(key) }
            catch (_) { return getCookie(key) }
                        return undefined
        }
        function clearSelection() { // http://stackoverflow.com/a/13415236
            if (window.getSelection) window.getSelection().removeAllRanges()
            else if (document.selection) document.selection.empty()
        }
        /* ------------------------ */

        (function start() {
            randomizeBackground(images)
            setName()
            tick()
        })()
        function randomizeBackground(images, imagePath = "./img/") {
            randomImage = images[Math.floor(Math.random() * images.length)]
            document.getElementById('background').style.backgroundImage = "url(" + imagePath + randomImage.filename + ")"
            document.getElementById('location').innerHTML = randomImage.location
            document.getElementById('location').href = "http://maps.google.com/?q=" + (encodeURIComponent(randomImage.location))
        }
        function setName() {
            var name = loadName()
            if(name)
                setContent('name', name)
            else {
                storeName("your name here")
                setName()
            }
        }
        function storeName(name) {
            storeData("name", name)
        }
        function loadName() {
            return loadData("name")
        }
        (function() {
            var nameInput = document.getElementById("name")
            nameInput.onkeydown = function(event) {
                if(event.keyCode == 13) {
                    nameInput.blur()
                    event.preventDefault()
                    event.stopPropagation()
                }
            }
            nameInput.onkeyup = function(event) {
                storeName(nameInput.textContent) // enter is handled in onkeydown
            };
            nameInput.onblur = function(event) {
                if(nameInput.textContent == ""){
                    storeName("still your name here")
                    setName()
                }
                else
                    clearSelection()
            }
        })()
        function tick() {
            var now = new Date();
            setContent('clock', getTime(now))
            setContent('greeting', getGreeting(now))
            setTimeout(tick, 1000)
        }
        function getTime(time) {
            function formatTime(number) {
                return ("0" + number).slice(-2)
            }
            return formatTime(time.getHours()) + ":" + formatTime(time.getMinutes())
        }
        function getGreeting(time) {
            time = (time.getHours() * 100) + time.getMinutes();
            if (time < 0400) return "Go to bed"; else
            if (time < 1100) return "Good morning"; else
            if (time < 1230) return "Enjoy your meal"; else
            if (time < 1700) return "Good afternoon"; else
                             return "Good evening"
        }
    })()
    </script>
</body>
</html>
